import{_ as s,o as n,c as a,y as e}from"./app.6d59bd98.js";const m=JSON.parse('{"title":"腾讯云-对象存储","description":"","frontmatter":{"date":"2023-02-15","title":"腾讯云-对象存储","author":"Younglina","categories":["文档"],"tags":["记录"]},"headers":[{"level":3,"title":"下载依赖","slug":"下载依赖","link":"#下载依赖","children":[]},{"level":3,"title":"初始化一个COS对象","slug":"初始化一个cos对象","link":"#初始化一个cos对象","children":[]},{"level":3,"title":"获取对应存储桶中的数据","slug":"获取对应存储桶中的数据","link":"#获取对应存储桶中的数据","children":[]},{"level":3,"title":"批量上传","slug":"批量上传","link":"#批量上传","children":[]},{"level":3,"title":"获取单个对象","slug":"获取单个对象","link":"#获取单个对象","children":[]},{"level":3,"title":"上传单个对象","slug":"上传单个对象","link":"#上传单个对象","children":[]}],"relativePath":"write/docs/tengxuncos.md","lastUpdated":1676857817000}'),l={name:"write/docs/tengxuncos.md"},p=e(`<p>需要有腾讯云的对象存储服务，可存储图片，自定义的一些JSON数据。<br> 相关链接: <a href="https://cloud.tencent.com/document/api/436/7751" target="_blank" rel="noreferrer">https://cloud.tencent.com/document/api/436/7751</a></p><h3 id="下载依赖" tabindex="-1">下载依赖 <a class="header-anchor" href="#下载依赖" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">npm i cos-js-sdk-v5</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="初始化一个cos对象" tabindex="-1">初始化一个COS对象 <a class="header-anchor" href="#初始化一个cos对象" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">import COS from &quot;cos-js-sdk-v5&quot;;</span></span>
<span class="line"><span style="color:#A6ACCD;">const myCos = new COS({</span></span>
<span class="line"><span style="color:#A6ACCD;">  SecretId: i<wbr>mport.meta.env.VITE_SID,</span></span>
<span class="line"><span style="color:#A6ACCD;">  SecretKey: i<wbr>mport.meta.env.VITE_SKEY,</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="获取对应存储桶中的数据" tabindex="-1">获取对应存储桶中的数据 <a class="header-anchor" href="#获取对应存储桶中的数据" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">// 数据在cosData.Contents中</span></span>
<span class="line"><span style="color:#A6ACCD;">const cosData = await myCos.getBucket({</span></span>
<span class="line"><span style="color:#A6ACCD;">    Bucket: &quot;younglina-1256042946&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Region: &quot;ap-nanjing&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">});</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="批量上传" tabindex="-1">批量上传 <a class="header-anchor" href="#批量上传" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">const formatFiles = files.map(item=&gt;{</span></span>
<span class="line"><span style="color:#A6ACCD;">  return {  </span></span>
<span class="line"><span style="color:#A6ACCD;">    SecretId: i<wbr>mport.meta.env.VITE_SID,</span></span>
<span class="line"><span style="color:#A6ACCD;">    SecretKey: i<wbr>mport.meta.env.VITE_SKEY,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Key: \`\${type}_\${timekey}_\${item.file.name}\`,</span></span>
<span class="line"><span style="color:#A6ACCD;">    StorageClass: &quot;STANDARD&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Body: item.file, // 上传文件对象</span></span>
<span class="line"><span style="color:#A6ACCD;">  }</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">myCos.uploadFiles({</span></span>
<span class="line"><span style="color:#A6ACCD;">      files: formatFiles,</span></span>
<span class="line"><span style="color:#A6ACCD;">      SliceSize: 1024 * 1024 * 10,    /* 设置大于10MB采用分块上传 */</span></span>
<span class="line"><span style="color:#A6ACCD;">      onProgress: function (info) {</span></span>
<span class="line"><span style="color:#A6ACCD;">          var percent = parseInt(info.percent * 10000) / 100;</span></span>
<span class="line"><span style="color:#A6ACCD;">          var speed = parseInt(info.speed / 1024 / 1024 * 100) / 100;</span></span>
<span class="line"><span style="color:#A6ACCD;">          console.log(&#39;进度：&#39; + percent + &#39;%; 速度：&#39; + speed + &#39;Mb/s;&#39;);</span></span>
<span class="line"><span style="color:#A6ACCD;">      },</span></span>
<span class="line"><span style="color:#A6ACCD;">      onFileFinish: function (err, data, options) {</span></span>
<span class="line"><span style="color:#A6ACCD;">          console.log(options.Key + &#39;上传&#39; + (err ? &#39;失败&#39; : &#39;完成&#39;));</span></span>
<span class="line"><span style="color:#A6ACCD;">      },</span></span>
<span class="line"><span style="color:#A6ACCD;">  }, function (err, data) {</span></span>
<span class="line"><span style="color:#A6ACCD;">      console.log(err || data);</span></span>
<span class="line"><span style="color:#A6ACCD;">  });</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br></div></div><h3 id="获取单个对象" tabindex="-1">获取单个对象 <a class="header-anchor" href="#获取单个对象" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">// 根据key值（文件名）获取</span></span>
<span class="line"><span style="color:#A6ACCD;">const data = await myCos.getObject({</span></span>
<span class="line"><span style="color:#A6ACCD;">  Bucket: &quot;younglina-1256042946&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Region: &quot;ap-nanjing&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">  Key: \`test.json\`,</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;">console.log(data.Body)</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="上传单个对象" tabindex="-1">上传单个对象 <a class="header-anchor" href="#上传单个对象" aria-hidden="true">#</a></h3><div class="language- line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#A6ACCD;">// key为文件名，body为数据</span></span>
<span class="line"><span style="color:#A6ACCD;">myCos.putObject({  </span></span>
<span class="line"><span style="color:#A6ACCD;">    Bucket: &quot;younglina-1256042946&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Region: &quot;ap-nanjing&quot;,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Key: \`test.json\`,</span></span>
<span class="line"><span style="color:#A6ACCD;">    Body: JSON.parse([{a:1}]),</span></span>
<span class="line"><span style="color:#A6ACCD;">})</span></span>
<span class="line"><span style="color:#A6ACCD;"></span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div>`,13),r=[p];function c(i,o,t,b,u,d){return n(),a("div",null,r)}const A=s(l,[["render",c]]);export{m as __pageData,A as default};
